# 📚 نظام إدارة الطلاب - دليل المستخدم

## 🎯 مرحباً بك!

تم تطويركل ميزات نظام إدارة الطلاب الأونلاين بنجاح! 🎉

---

## 🌟 الميزات الرئيسية

### 1️⃣ تسجيل الطلاب الأونلاين/الأوفلاين

**الموقع**: http://localhost:8080/auth

**الخطوات**:
1. اختر نوع التسجيل:
   - 🌐 **أونلاين**: الطالب يرسل طلب ينتظر الموافقة
   - 📍 **أوفلاين**: (قريباً)
   
2. أملأ البيانات:
   - الاسم
   - رقم الهاتف
   - الصف الدراسي
   - المجموعة
   - الكورسات المطلوبة
   
3. اضغط "تسجيل"
   - الطلب يُرسل للإدارة

---

### 2️⃣ إدارة طلبات التسجيل

**الموقع**: http://localhost:8080/registration-requests

**ما يشاهده الأدمن**:
- قائمة بجميع طلبات التسجيل المعلقة
- معلومات الطالب الكاملة
- تاريخ الطلب
- زرار القبول/الرفض

**عند الموافقة**:
✅ ينشأ حساب للطالب  
✅ ينشأ سجل في قاعدة البيانات  
✅ يظهر الطالب في قائمة الطلاب  

**عند الرفض**:
❌ لا ينشأ أي حساب  
📝 يحفظ سبب الرفض  
📧 يمكن إعادة النظر لاحقاً  

---

### 3️⃣ قائمة الطلاب

**الموقع**: http://localhost:8080/students

**المميزات**:
- 🔍 البحث عن الطالب بالاسم أو الرقم
- 📊 معلومات شاملة لكل طالب
- ✏️ تعديل بيانات الطالب
- 🗑️ حذف الطالب

---

### 4️⃣ تعديل بيانات الطالب

**الخطوات**:
1. اذهب إلى `/students`
2. اضغط على ✏️ بجانب الطالب
3. عدّل البيانات:
   - الاسم
   - البريد الإلكتروني
   - رقم الهاتف
   - المرحلة الدراسية
   - المجموعة
   
4. اضغط "تحديث البيانات"
5. ✅ البيانات تُحفظ في قاعدة البيانات فوراً

---

### 5️⃣ حذف الطالب

**الخطوات**:
1. اذهب إلى `/students`
2. اضغط على 🗑️ بجانب الطالب
3. سيتم حذف الطالب من قاعدة البيانات
4. ✅ يختفي من القائمة فوراً

**ملاحظة**: الحذف هو "soft delete" - البيانات محفوظة في قاعدة البيانات للتقارير

---

## 🛠️ التثبيت والتشغيل

### المتطلبات
- Node.js v16+
- npm أو yarn
- MySQL (Freelance database)

### التشغيل

**1. تثبيت المتعلقات**:
```bash
npm install
```

**2. تشغيل الخادم الخلفي** (Terminal 1):
```bash
npm run dev:server
```
✅ سيعمل على: http://localhost:3001

**3. تشغيل الواجهة الأمامية** (Terminal 2):
```bash
npm run dev
```
✅ سيعمل على: http://localhost:8080

**4. قاعدة البيانات**:
```bash
# تأكد من تشغيل MySQL
mysql -u root -p
# استخدم قاعدة البيانات: Freelance
```

---

## 📊 معلومات قاعدة البيانات

### جداول المستخدمة

#### `student_registration_requests`
```sql
- id: معرّف فريد
- name: اسم الطالب
- phone: رقم الهاتف
- grade_id: رقم المرحلة
- group_id: رقم المجموعة
- is_offline: نوع التسجيل (0=أونلاين, 1=أوفلاين)
- status: حالة الطلب (pending/approved/rejected)
- rejection_reason: سبب الرفض (إن وجد)
- created_at: تاريخ الطلب
```

#### `students`
```sql
- id: معرّف فريد
- name: اسم الطالب
- phone: رقم الهاتف
- email: البريد الإلكتروني
- grade_id: رقم المرحلة
- group_id: رقم المجموعة
- is_offline: نوع الالتحاق
- is_active: هل الطالب نشط؟
- password_hash: كلمة السر المُشفرة
- created_at: تاريخ الانضمام
- updated_at: تاريخ آخر تحديث
```

---

## 🔌 API Endpoints

### جلب البيانات

```bash
# جلب قائمة الطلاب
GET /api/students

# جلب المراحل الدراسية
GET /api/grades

# جلب المجموعات
GET /api/groups

# جلب الكورسات
GET /api/courses

# جلب الاشتراكات
GET /api/subscriptions

# جلب طلبات التسجيل
GET /api/registration-requests?status=pending&is_offline=false
```

### إضافة وتعديل وحذف

```bash
# إضافة طلب تسجيل جديد
POST /api/registration-requests
Body: {
  name, phone, grade_id, group_id, is_offline, courses
}

# الموافقة على طلب
POST /api/registration-requests/:id/approve

# رفض طلب
POST /api/registration-requests/:id/reject
Body: { reason: "السبب" }

# تحديث طالب
PUT /api/students/:id
Body: { name, email, phone, grade_id, group_id }

# حذف طالب
DELETE /api/students/:id
```

---

## 🎨 الواجهة المستخدم

### الألوان والرموز

| الرمز | المعنى | اللون |
|------|--------|-------|
| 🌐 | أونلاين | أزرق |
| 📍 | أوفلاين | أخضر |
| ✏️ | تعديل | أزرق فاتح |
| 🗑️ | حذف | أحمر |
| ✅ | نشط | أخضر |
| ❌ | غير نشط | أصفر |

---

## 🐛 حل المشاكل

### المشكلة: الصفحة بيضاء
**الحل**: 
1. تأكد من تشغيل الخادم الخلفي: `npm run dev:server`
2. تأكد من تشغيل الخادم الأمامي: `npm run dev`
3. امسح ذاكرة المتصفح: Ctrl+Shift+Delete

### المشكلة: "فشل تحديث الطالب"
**الحل**:
1. تأكد من البيانات المدخلة صحيحة
2. تحقق من اتصال قاعدة البيانات
3. افتح console: F12 واقرأ الخطأ

### المشكلة: الطالب لا يظهر بعد القبول
**الحل**:
1. انتظر ثانية وأعد تحديث الصفحة
2. تحقق من أن الطلب كان "pending" وليس مُعدّل
3. تحقق من `is_offline = 0` في الطلب

---

## 📱 المتصفحات المدعومة

- ✅ Chrome (الأفضل)
- ✅ Firefox
- ✅ Safari
- ✅ Edge
- ⚠️ Internet Explorer (قديم جداً، لا ينصح به)

---

## 🔐 الأمان

### نقاط الأمان المطبقة:
- ✅ تشفير كلمات المرور (bcrypt)
- ✅ تحقق من المدخلات
- ✅ معالجة الأخطاء
- ✅ (سيتم إضافة JWT في المستقبل)

---

## 📞 الدعم والمساعدة

### إذا واجهت مشكلة:
1. اقرأ الرسالة الخطأ
2. افتح DevTools (F12)
3. انسخ الخطأ من Console
4. راجع قسم "حل المشاكل"

---

## 📈 الخطوات التالية

### ميزات قادمة:
- [ ] نظام تسجيل الطلاب الأوفلاين
- [ ] تصدير الطلاب إلى Excel
- [ ] البحث والفلترة المتقدمة
- [ ] صور الطلاب
- [ ] نظام الإشعارات
- [ ] لوحة معلومات محسّنة

---

## 📝 التوثيق الإضافية

للمزيد من المعلومات التقنية:
- اقرأ `FEATURES_SUMMARY.md` - ملخص الميزات
- اقرأ `DELETE_EDIT_FEATURES.md` - تفاصيل الحذف والتعديل
- اقرأ `FINAL_STATUS_REPORT.md` - تقرير الحالة النهائي

---

## 🎉 شكراً لاستخدامك النظام!

**آخر تحديث**: 31 أكتوبر 2025  
**الإصدار**: 1.0.0  
**الحالة**: ✅ جاهز للاستخدام الكامل
