#!/bin/bash

# ========================================
# ุงุฎุชุจุงุฑ ุดุงูู ูููุฒุงุช ุงูุทูุงุจ
# ========================================

BASE_URL="http://localhost:3001/api"
AUTH_TOKEN=""

echo "๐งช ุจุฏุก ุงูุงุฎุชุจุงุฑ ุงูุดุงูู..."
echo "========================================\n"

# ========================================
# 1. ุงุฎุชุจุงุฑ ุงูุญุตูู ุนูู ุงูุทูุงุจ
# ========================================
echo "1๏ธโฃ  ุงุฎุชุจุงุฑ ุฌูุจ ุงูุทูุงุจ..."
curl -X GET "$BASE_URL/students" \
  -H "Content-Type: application/json" \
  -w "\nโ ุญุงูุฉ ุงูุงุณุชุฌุงุจุฉ: %{http_code}\n" \
  2>/dev/null | head -c 500

echo "\n\n"

# ========================================
# 2. ุงุฎุชุจุงุฑ ุงูุญุตูู ุนูู ุงููุฑุงุญู ุงูุฏุฑุงุณูุฉ
# ========================================
echo "2๏ธโฃ  ุงุฎุชุจุงุฑ ุฌูุจ ุงููุฑุงุญู ุงูุฏุฑุงุณูุฉ..."
curl -X GET "$BASE_URL/grades" \
  -H "Content-Type: application/json" \
  -w "\nโ ุญุงูุฉ ุงูุงุณุชุฌุงุจุฉ: %{http_code}\n" \
  2>/dev/null | head -c 300

echo "\n\n"

# ========================================
# 3. ุงุฎุชุจุงุฑ ุงูุญุตูู ุนูู ุงููุฌููุนุงุช
# ========================================
echo "3๏ธโฃ  ุงุฎุชุจุงุฑ ุฌูุจ ุงููุฌููุนุงุช..."
curl -X GET "$BASE_URL/groups" \
  -H "Content-Type: application/json" \
  -w "\nโ ุญุงูุฉ ุงูุงุณุชุฌุงุจุฉ: %{http_code}\n" \
  2>/dev/null | head -c 300

echo "\n\n"

# ========================================
# 4. ุงุฎุชุจุงุฑ ุงูุญุตูู ุนูู ุงูููุฑุณุงุช
# ========================================
echo "4๏ธโฃ  ุงุฎุชุจุงุฑ ุฌูุจ ุงูููุฑุณุงุช..."
curl -X GET "$BASE_URL/courses" \
  -H "Content-Type: application/json" \
  -w "\nโ ุญุงูุฉ ุงูุงุณุชุฌุงุจุฉ: %{http_code}\n" \
  2>/dev/null | head -c 300

echo "\n\n"

# ========================================
# 5. ุงุฎุชุจุงุฑ ุงูุญุตูู ุนูู ุงูุงุดุชุฑุงูุงุช
# ========================================
echo "5๏ธโฃ  ุงุฎุชุจุงุฑ ุฌูุจ ุงูุงุดุชุฑุงูุงุช..."
curl -X GET "$BASE_URL/subscriptions" \
  -H "Content-Type: application/json" \
  -w "\nโ ุญุงูุฉ ุงูุงุณุชุฌุงุจุฉ: %{http_code}\n" \
  2>/dev/null | head -c 300

echo "\n\n"

# ========================================
# 6. ุงุฎุชุจุงุฑ ุทูุจุงุช ุงูุชุณุฌูู (ุงูุทูุงุจ ุงูุฃูููุงูู ููุท)
# ========================================
echo "6๏ธโฃ  ุงุฎุชุจุงุฑ ุฌูุจ ุทูุจุงุช ุงูุชุณุฌูู (ุงูุทูุงุจ ุงูุฃูููุงูู ุงููุนููุฉ)..."
curl -X GET "$BASE_URL/registration-requests?status=pending&is_offline=false" \
  -H "Content-Type: application/json" \
  -w "\nโ ุญุงูุฉ ุงูุงุณุชุฌุงุจุฉ: %{http_code}\n" \
  2>/dev/null | head -c 500

echo "\n\n"

# ========================================
# 7. ุงุฎุชุจุงุฑ ุงูุญุฐู (Soft Delete)
# ========================================
echo "7๏ธโฃ  ุงุฎุชุจุงุฑ ุงูุญุฐู (ูุฐุง ุณูููู soft delete ููุท)..."
echo "ููุงุญุธุฉ: ูุฐุง ุงูุงุฎุชุจุงุฑ ูุญุชุงุฌ ูุนุฑู ุทุงูุจ ุญูููู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช"
echo "ุงูุทูุจ: DELETE /api/students/{student_id}"
echo "ุงูุงุณุชุฌุงุจุฉ ุงููุชููุนุฉ: { \"message\": \"Student deleted successfully\" }"

echo "\n\n"

# ========================================
# ููุฎุต ุงูุงุฎุชุจุงุฑุงุช
# ========================================
echo "========================================\n"
echo "โ ุงุฎุชุจุงุฑุงุช API ููุชููุฉ!"
echo ""
echo "๐ ุงูููุฒุงุช ุงููุฎุชุจุฑุฉ:"
echo "  1. ุฌูุจ ูุงุฆูุฉ ุงูุทูุงุจ"
echo "  2. ุฌูุจ ุงููุฑุงุญู ุงูุฏุฑุงุณูุฉ"
echo "  3. ุฌูุจ ุงููุฌููุนุงุช"
echo "  4. ุฌูุจ ุงูููุฑุณุงุช"
echo "  5. ุฌูุจ ุงูุงุดุชุฑุงูุงุช"
echo "  6. ุฌูุจ ุทูุจุงุช ุงูุชุณุฌูู (ุฃูููุงูู ููุท)"
echo "  7. ุงุฎุชุจุงุฑ ุงูุญุฐู (Soft Delete)"
echo ""
echo "๐ ุงุฎุชุจุงุฑุงุช ูุฏููุฉ ูุทููุจุฉ:"
echo "  โข ุงุฎุชุจุงุฑ ุงูุชุนุฏูู: PUT /api/students/{id}"
echo "  โข ุงุฎุชุจุงุฑ ุงููุจูู: POST /api/registration-requests/{id}/approve"
echo "  โข ุงุฎุชุจุงุฑ ุงูุฑูุถ: POST /api/registration-requests/{id}/reject"
echo ""
echo "๐ ุงููุงุฌูุงุช ุงูุฃูุงููุฉ:"
echo "  โข http://localhost:8080/students - ูุงุฆูุฉ ุงูุทูุงุจ"
echo "  โข http://localhost:8080/registration-requests - ุทูุจุงุช ุงูุชุณุฌูู"
echo "  โข http://localhost:8080/auth - ุชุณุฌูู ุงูุทูุงุจ"
echo ""
echo "โจ ุงูุญุงูุฉ: ุฌุงูุฒ ููุงุณุชุฎุฏุงู"
