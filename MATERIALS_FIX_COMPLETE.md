# ๐ฏ ุฅุตูุงุญ ูุดููุฉ ุนุฏู ุธููุฑ ุงููุญุชูู ุงูุชุนูููู

## ๐ ุงููุดุงูู ุงูุชู ุชู ุงูุชุดุงููุง ูุฅุตูุงุญูุง

### โ ุงููุดููุฉ 1: ุงููุญุชูู ุบูุฑ ููุดูุฑ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
**ุงููุตู:** ุฌููุน ุงูููุงุฏ ุงูุชุนููููุฉ ูู ุฌุฏูู `course_materials` ูุงูุช `is_published = 0`

**ุงูุชุฃุซูุฑ:** ุงูุจุงู ุฅูุฏ ูุฌูุจ ููุท ุงูููุงุฏ ุงูููุดูุฑุฉ `WHERE is_published = TRUE`

**ุงูุญู:**
```sql
UPDATE course_materials 
SET is_published = 1 
WHERE is_published = 0;
```

**ุงููุชูุฌุฉ:** โ ุชู ูุดุฑ 4 ููุงุฏ ุชุนููููุฉ

---

### โ ุงููุดููุฉ 2: ุนุฏู ุฑุจุท ุงููุณุชุฎุฏููู ุจุงูุทูุงุจ
**ุงููุตู:** ุฌุฏูู `users` ูุง ูุญุชูู ุนูู `student_id` ููุฑุจุท ูุน ุฌุฏูู `students`

**ุงูุชุฃุซูุฑ:** API ูุง ูุณุชุทูุน ูุนุฑูุฉ ุงููุฌููุนุฉ ุงูุชู ููุชูู ููุง ุงูุทุงูุจ

**ุงูุญู:**
```sql
UPDATE users u
INNER JOIN students s ON u.phone = s.phone
SET u.student_id = s.id
WHERE u.role = 'student' 
  AND u.student_id IS NULL;
```

**ุงููุชูุฌุฉ:** โ ุชู ุฑุจุท ุงููุณุชุฎุฏู `01029290728` ุจุงูุทุงูุจ `Baraa wael`

---

### โ ุงููุดููุฉ 3: ูุถุน ุงูุชุทููุฑ (DEV MODE) ููุนูู
**ุงููุตู:** ูู ููู `src/lib/api-http.ts` ูุงู `DISABLE_AUTH_DEV = true`

**ุงูุชุฃุซูุฑ:** ูุณุชุฎุฏู ุจูุงูุงุช ุชุฌุฑูุจูุฉ ุจุฏูุงู ูู ุงูุจูุงูุงุช ุงูุญููููุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

**ุงูุญู:**
```typescript
// src/lib/api-http.ts
const DISABLE_AUTH_DEV = false; // โ ุชู ุงูุชุนุทูู
```

**ุงููุชูุฌุฉ:** โ ุงูุขู ูุณุชุฎุฏู ุงูุจูุงูุงุช ุงูุญููููุฉ ูู MySQL

---

## ๐ง ููููุฉ ุนูู ุงููุธุงู ุงูุตุญูุญ

### 1๏ธโฃ ุชุณูุณู ุฌูุจ ุงูุจูุงูุงุช

```
ุงูุทุงูุจ ููุชุญ ุตูุญุฉ ุงููุญุชูู
    โ
ููุฑุฃ currentUser ูู localStorage
    โ
ูุญุตู ุนูู student_id ุฃู user.id
    โ
ูุณุชุฏุนู: getStudentMaterials(studentId)
    โ
API: GET /api/materials/student/:userId
    โ
Backend ูุชุญูู ูู:
   - ูู ูุฐุง user_idุ โ ูุจุญุซ ูู users.student_id
   - ูู ูุฐุง student_idุ โ ูุจุญุซ ูู students.id
    โ
ูุญุตู ุนูู group_id ููุทุงูุจ
    โ
ูุฌูุจ ุงูููุงุฏ ูู material_groups
    โ
WHERE is_published = TRUE AND mg.group_id = ?
    โ
ูุฑุฌุน ุงูููุงุฏ ุงูุชุนููููุฉ ูููุฑููุช
```

### 2๏ธโฃ ุงูุจููุฉ ุงููุทููุจุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

```sql
-- ุฌุฏูู ุงููุณุชุฎุฏููู (ููุชุณุฌูู ูุงูุฏุฎูู)
users:
  - id (UUID)
  - phone
  - role = 'student'
  - student_id โ ูุดูุฑ ุฅูู students.id

-- ุฌุฏูู ุงูุทูุงุจ (ุงูุจูุงูุงุช ุงูุฃูุงุฏูููุฉ)
students:
  - id (UUID)
  - name
  - phone
  - group_id โ ูุดูุฑ ุฅูู groups.id
  - is_active = 1

-- ุฌุฏูู ุงูููุงุฏ ุงูุชุนููููุฉ
course_materials:
  - id (UUID)
  - title
  - material_type (video/pdf/etc)
  - is_published = 1 โ ููู!
  - file_url

-- ุฌุฏูู ุฑุจุท ุงูููุงุฏ ุจุงููุฌููุนุงุช
material_groups:
  - material_id โ ูุดูุฑ ุฅูู course_materials.id
  - group_id โ ูุดูุฑ ุฅูู groups.id
```

### 3๏ธโฃ ุงููููุงุช ุงููุนุฏูุฉ

| ููู | ุงูุชุนุฏูู | ุงููุฏู |
|-----|---------|--------|
| `src/lib/api-http.ts` | `DISABLE_AUTH_DEV = false` | ุงุณุชุฎุฏุงู ุงูุจูุงูุงุช ุงูุญููููุฉ |
| `src/pages/StudentContent.tsx` | ุฅุถุงูุฉ console.log | ุชุชุจุน ุงูุจูุงูุงุช ูุงูุชุญูู ูููุง |
| `database/fix-materials-display.sql` | ุณูุฑูุจุช SQL ุฌุฏูุฏ | ุฅุตูุงุญ ุงูุจูุงูุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช |

---

## โ ุงูุชุญูู ูู ุงูุฅุตูุงุญ

### ุงุฎุชุจุงุฑ API ูุจุงุดุฑุฉ
```bash
# ุงุณุชุจุฏู USER_ID ุจุฑูู ุงููุณุชุฎุฏู ุงููุนูู
curl http://localhost:3001/api/materials/student/41890744-e1f1-4236-8918-d09a2358c2e0
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:** ูุงุฆูุฉ JSON ุจุงูููุงุฏ ุงูุชุนููููุฉ

### ุงุฎุชุจุงุฑ ูู ุงููุชุตูุญ
1. ุงูุชุญ Developer Console (F12)
2. ุณุฌู ุฏุฎูู ูุทุงูุจ
3. ุงูุชุญ ุตูุญุฉ ุงููุญุชูู ุงูุชุนูููู
4. ุดุงูุฏ ุงูู console logs:
   ```
   ๐ค Current user: {id: "...", student_id: "..."}
   ๐ Student identifier: "d48eccb5-..."
   ๐ Materials received from API: [{...}, {...}]
   โ Materials set to state: 4 items
   ```

### ุงูุชุญูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
```sql
-- ุชุดุบูู ุงูููู database/fix-materials-display.sql
-- ุณูุนุฑุถ:
-- 1. ุนุฏุฏ ุงูููุงุฏ ุงูููุดูุฑุฉ
-- 2. ุนุฏุฏ ุงููุณุชุฎุฏููู ุงููุฑุชุจุทูู
-- 3. ูุงุฆูุฉ ุงูููุงุฏ ูุน ุงููุฌููุนุงุช
-- 4. ูุงุฆูุฉ ุงูุทูุงุจ ูุน ูุฌููุนุงุชูู
```

---

## ๐ ุงููุชุงุฆุฌ ุงูููุงุฆูุฉ

### ูุจู ุงูุฅุตูุงุญ โ
- ุงูููุงุฏ ุงูุชุนููููุฉ: 0 ูุงุฏุฉ ุชุธูุฑ
- ุงูุณุจุจ: `is_published = 0` + `student_id = NULL` + `DISABLE_AUTH_DEV = true`

### ุจุนุฏ ุงูุฅุตูุงุญ โ
- ุงูููุงุฏ ุงูุชุนููููุฉ: 4 ููุงุฏ ุชุธูุฑ
- ุงูุทุงูุจ: Baraa wael
- ุงููุฌููุนุฉ: d8d066d5-dc69-425b-bf33-7e19ed5b9f17
- ุงูููุงุฏ: 4 ููุฏูููุงุช ูู ูุงุฏุฉ ุงูุชุงุฑูุฎ

---

## ๐ ุฎุทูุงุช ุงูุชุดุบูู ุงูุตุญูุญุฉ

### 1. ุชุดุบูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
```bash
# ุชุฃูุฏ ูู ุชุดุบูู XAMPP MySQL
# ุงุณุชูุฑุฏ database/fix-materials-display.sql
```

### 2. ุชุดุบูู Backend
```bash
cd server
npm run dev
# ูุฌุจ ุฃู ูุนูู ุนูู http://localhost:3001
```

### 3. ุชุดุบูู Frontend
```bash
npm run dev
# ูุนูู ุนูู http://localhost:8081
```

### 4. ุชุณุฌูู ุงูุฏุฎูู
```
ุฑูู ุงููุงุชู: 01029290728
ูููุฉ ุงููุฑูุฑ: (ุญุณุจ ูุง ุชู ุชุณุฌููู)
```

### 5. ุงูุชุญูู
- ุงูุชุญ ุตูุญุฉ ุงููุญุชูู ุงูุชุนูููู
- ูุฌุจ ุฃู ุชุธูุฑ 4 ููุงุฏ ุชุนููููุฉ

---

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุฅุฐุง ูู ุชุธูุฑ ุงูููุงุฏ:
1. **ุชุญูู ูู console.log ูู ุงููุชุตูุญ**
   - ูู `currentUser` ููุฌูุฏุ
   - ูู `student_id` ููุฌูุฏุ
   - ูู API ุชุฑุฌุน ุจูุงูุงุชุ

2. **ุชุญูู ูู API ูุจุงุดุฑุฉ**
   ```bash
   curl http://localhost:3001/api/materials/student/USER_ID
   ```

3. **ุชุญูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช**
   ```sql
   -- ุงูููุงุฏ ุงูููุดูุฑุฉ
   SELECT COUNT(*) FROM course_materials WHERE is_published = 1;
   
   -- ุงูุทูุงุจ ุงููุฑุชุจุทูู
   SELECT * FROM users WHERE role = 'student' AND student_id IS NOT NULL;
   
   -- ุงูููุงุฏ ุงููุฑุชุจุทุฉ ุจุงููุฌููุนุงุช
   SELECT COUNT(*) FROM material_groups;
   ```

4. **ุชุญูู ูู DISABLE_AUTH_DEV**
   ```typescript
   // src/lib/api-http.ts
   const DISABLE_AUTH_DEV = false; // ูุฌุจ ุฃู ูููู false
   ```

---

## ๐ ููุงุญุธุงุช ูููุฉ

1. **ููู ุทุงูุจ ุฌุฏูุฏ:** ูุฌุจ ุฑุจุทู ุจู `student_id` ูู ุฌุฏูู `users`
2. **ููู ูุงุฏุฉ ุฌุฏูุฏุฉ:** ูุฌุจ ุชุนููู `is_published = 1`
3. **ููู ูุฌููุนุฉ:** ูุฌุจ ุฑุจุทูุง ุจุงูููุงุฏ ูู `material_groups`
4. **ููุชุทููุฑ:** ุงุณุชุฎุฏู `DISABLE_AUTH_DEV = false` ููุงุชุตุงู ุจุงูู backend ุงูุญูููู

---

โ **ุชู ุงูุฅุตูุงุญ ุจูุฌุงุญ!**
ุงูุขู ุตูุญุฉ ุงููุญุชูู ุงูุชุนูููู ูุฑุจูุทุฉ ุจุงููุงูู ุจุงูุจุงู ุฅูุฏ ููุงุนุฏุฉ ุงูุจูุงูุงุช ูุชุนุฑุถ ุงูููุงุฏ ุจุดูู ุตุญูุญ! ๐
